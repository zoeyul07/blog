---
emoji: ''
title: 'Blockchain: basic'
date: '2022-02-21 22:00:00'
author: seoyul
tags: blockchain
categories: BlockChain
---

다음 글은 Nomad Coder의 [암호화폐 101 with Nico](https://www.youtube.com/watch?v=ElGBP90XZWE&list=PL7jH19IHhOLOJfXeVqjtiawzNQLxOgTdq&index=3) 시리즈를 정리한 글 입니다.

## blockchain
블록체인은 블록들이 모여있는 체인으로 데이터베이스를 예로 들을 수 있다. 이 데이터베이스는 추가만 가능하고 삭제는 불가능하며 편집도 불가능하다.
블록체인은 탉중화화가 가능하며 특정 개인이 DB를 관리할 수 없고 모두가 DB의 복제본을 갖고 있는 분산된 DB로서 크립토를 감시하거나 통제하기 어렵게 만든다.(많은 사람들이 노드를 돌리고 있고 모두가 정확하게 동일한 DB 복제본을 갖고 있기 때문에 모두가 컴퓨터를 몽땅 꺼야 비트코인이 죽을 수 있지만 동시에 그런일이 일어날 일은 없기 때문에 불가능하다. 덕분에 크립토 커런시들이 정부의 감시나 통제에 대응할 수 있다.)

블록은 정보를 DB에 추가하는 방법이다. 데이터를 그냥 추가하는 것이 아니라 블록이라는 것으로 추가하며 비트코인의 경우 10분마다 블록이 생성된다.
블록에는 중요한 정보들이 많은데, 블록의 해시 이전 블록의 해시 그리고 데이터를 꼽을 수 있다.
비트코인의 경우 데이터는 트랜잭션, 즉 거래내역을 의미한다.(누가 얼마나 갖고있고 누가 누구에게 얼마나 보냈고.. 등등의 내용들이 비트고인 데이터 부분에 저장된다.)

해시는 수학 함수인데 한개의 인풋을 받으면 아웃풋을 준다. 이 함수는 일방향 함수이며 결정론적(deterministic)이다. 
결정론적이라는 단어의 의미는 input으로 "안녕"을 집어넣는다면 아웃풋은 항상 같은것으로 정해져있다는 의미이다. 만약 input에서 "안녕!" 처럼 조금이라도 바뀔 경우 output은 엄청나게 바뀌게 된다.
일방향 함수는 input을 넣으면 output을 구할 수 있지만 output을 갖고 input을 구할 수 없다는 의미이다.

블록체인에 블록을 추가하기 위해서는 비트코인 데이터인 transaction(거래내역)을 모으고 이전 블록의 해시를 구하고 나의 데이터 + 이전 블록의 해시를 합쳐서 다시 해시하여 블록의 해시를 만들면 블록체인에 블록을 추가할 수 있다. 그리고 다음 블록을 추가하고 싶다면 방금 합쳐서 만든 블록의 해시를 가지고 새로 추가하고자하는 데이터와 같이 결합해야한다.

이 방법으로 체인이 연결되고 input이 조금이라도 변경되면 output이 완전히 달라지게 되므로 누구도 블록체인을 변경할 수 없다.


### proof of work
비트코인이나 이더리움처럼 사람들이 돈을 보내고 누가 얼마나 보냈고 잔금이 얼마인지의 기록들은 아무나 블록을 생성할 수 있어서는 안되며 어떤 데이터가 블록체인에 추가되는지도 조심해야하는데, 어떤 데이터가 블록체인에 추가될 수 있는가 하면 거짓이 아닌 진실을 담은 데이터이며 이것을 위해 작업증명(proof of work)이 필요하다.

작업증명을 통해서 비트고인, 이더리움 등 다양한 크립토들이 사기꾼, 악용사례 등으로 부터 블록체인을 보호한다. 

작업증명을 이해하려면 '채굴자'라는 컨셉을 이해해야하는데, 채굴자는 데이터를 블록 안에 넣어서 블록체인에 보내는 역할을 함으로써 블록체인에 들어오는 데이터를 확인한다. 
예를 들어 비트코인 블록체인에서 코인은 친구에게 보내면 이 거래내역은 확인되지 않는데 만약 채굴자가 해당 거래내역을 보고, 확인하여 친구에게 돈을 보낸 모든 내역을 체크하고, 해당 내용의 사실 체크가 끝나면 그 데이터를 블록 안에 넣는다. 이러한 체크를 여러개해서 블록이 꽉 차면 블록을 닫고 블록체인에 올리며 채굴자의 이러한 역할 덕분에 블록체인에 올라가야하는 데이터를 모두 체크할 수 있다. 
이 방식은 탈중앙화 방법으로 이루어지고 있어 누구나 원한다면 채굴자가 될 수 있고 누구나 데이터를 검증할 수 있다. 채굴자든은 돈을 벌기 위해서 이 작업을 하는데, 트랜잭션을 컨펌하게 되면 돈(transfer fee)을 받는다. 덕분에 검증 작업이 활발하게 이루어져서 사기꾼으로부터 네트워크를 보호할 수 있다.

블록체인에 블록을 추가하는 일은 굉장히 어려운데, 작업 증명은 전체 네트워크가 다 아는 질문을 채굴자에게 하는데 채굴자는 그 답을 찾으면 그때서야 블록을 올릴 수 있다.
이렇게 채굴자는 2번 보상을 받게 되는데, 한번은 거래내역을 컨펌하면서이고, 다른한번은 질문의 답을 찾아서 블록을 체인에 올리면서 이며 이때 비트코인이 생성된다. 즉, 사람들이 블록을 블록체인에 올리는 순간 비트코인이 생성된다. 
채굴자가 블록체인에 블록을 올릴때마다 coinbase transaction이라는게 생기는데 이것은 비트코인이 생성되는 순간이다. 비트코인은 원래부터 생성되어있는게 아니라 블록을 체인에 올릴때마다 새롭게 생성된다.

처음에는 블록을 올릴떄만다 50개의 코인이 생성되었는데, 4년마다 반감기가 와서 생산량이 반으로 줄어든다. 비트코인은 무한정이 아니라 생산량이 2100만개로 한정되어있기 때문이다.

작업 증명이 채굴자에게 던지는 질문은 데이터를 넣었을 때 나오는 output hash(nonce + previous block hash + block data)의 결과가 특정 갯수의 0(난이도)으로 시작려면 어떤 nonce를 가져아하는지와 같은 질문을 던진다. (0은 얼마나 블록을 찾기 어려운지의 난이도를 뜻하며 nonce 는 한번만 쓰인 숫자로 채굴자는 블록에 들어갈 데이터를 바꿀 수 없고 오직 검증만할 수 있으며 nonce만이 채굴자가 바꿀 수 있는 유일한 값이다.)









***
[Ref]



```toc

```
